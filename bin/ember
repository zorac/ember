#!/usr/bin/env perl

=head1 NAME

ember - A CLI-based reader for eBooks.

=head1 SYNOPSIS

ember my_ebook.epub

=cut

use 5.008;
use strict;
use warnings FATAL => 'all', NONFATAL => 'redefine';

use Carp qw( cluck confess verbose );
use FindBin;
use lib "$FindBin::Bin/../lib";

$SIG{__DIE__} = \&confess;
$SIG{__WARN__} = \&cluck;

eval {
    require Ember;

    my $app = Ember->new(@ARGV);

    $app->run();
}; if ($@) {
    if ($@ =~ /^Can't locate \S+ in \@INC \(you may need to install the (\S+) module\)/) {
        print STDERR <<"EOF";

It looks like one or more of Ember's dependencies are missing. In particualar,
Perl can't find the following module: $1

You can install all the modules which Ember requires by using CPAN:

perl -MCPAN -e 'notest install qw( Archive::Zip Carp Cwd File::Slurp FindBin HTML::FormatText JSON Scalar::Util Term::Cap Term::ReadKey XML::Simple );

EOF
    } else {
        print STDERR <<"EOF";

Sorry, it looks like Ember has encountered an error. If you'd like to submit a
bug report, you can do so here: https://github.com/zorac/ember/issues
Please include the error dump below, and any details as to what you were doing
at the time.

$@
EOF
    }
}

=head1 DESCRIPTION

Ember is a very simple CLI-based reader for eBooks. It will automatically adapt
to your terminal width, and remembers the last position in each book.

=head2 Key Commands

=over

=item N, I<Space>

Go to the next page.

=item P, B

Go to the previous page.

=item I

Display book information.

=item C

Display table of contents; type a chapter number and press enter to jump to
that chapter.

=item R

Refresh the screen.

=item H

Display help about the current screen.

=item Q, I<Escape>

Exit to previous screen, or quit Ember.

=back

=head2 Suppported File Formats

=over

=item EPUB

Ember can read EPUB files in both zipped and unpacked formats.

=back

=head1 SEE ALSO

L<Ember>, L<Ember::Reader>

=head1 AUTHOR

Mark Rigby-Jones <mark@rigby-jones.net>

=cut
